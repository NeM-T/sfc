# ALU実装と乗算と除算と
## 前回の補足
### inc回路
ずっと1につないでいる＝消費電力やばい。  
各桁、値が変わるのは自分より下のbitがすべて1である時。  
    ――→ANDとXORでつなげばいいじゃん！  
![回路図](./img/inc.png)  
  
### dec回路
incと逆に考える。  

## ALU
**ALU：Arithmetic Logic Unit(算術論理演算器)**  
制御信号に応じて、計算を行うCPUの根幹。  
![ALU](./img/alu.png)
[HDL実装例](https://github.com/NeM-T/hdl_practice/blob/master/alu/alu1.sv)  
  
## シフト
### 論理シフト
シフトすることで空く桁に必ず0を入れる。nビット左シフトは2^n倍、右シフトは2^(-n)倍を意味する。  
![論理シフト](http://kccn.konan-u.ac.jp/information/cs/cyber03/images/ashcl.gif)  
  
![論理回路](./img/shift1.JPG)  
  
### 算術シフト
右シフト時に先頭(符号bit)をシフトすることで空く桁に入れる。負の数に対応できる。  
![算術右シフト](http://kccn.konan-u.ac.jp/information/cs/cyber03/images/bshcr.gif)  
![算術左シフト](http://kccn.konan-u.ac.jp/information/cs/cyber03/images/bshcl.gif)  
  
![論理回路](./img/shift2.JPG)
   
### ローテート
シフトによってはみ出る部分を空いた部分に当てはめる。  
![ローテータ](https://cdn-ak.f.st-hatena.com/images/fotolife/s/s3cr3t/20190327/20190327225302.png)  
  
![論理回路](./img/)
  
## 乗算
### 符号なし乗算器
筆算と同じようにする。  
![筆算](https://pds.exblog.jp/pds/1/201709/13/75/f0054075_23201334.png)  
aとbの乗算の場合bの各桁をaのすべての桁とのANDをとり、bの桁数-1分シフトし、加算する。
  
[HDL実装例](https://github.com/NeM-T/hdl_practice/blob/master/multiplier/multiplier2.sv)  
![論理回路](./img/)  
これは簡単な実装例であり、もっと最適化されたものはある。  
[これ](http://kivantium.hateblo.jp/entry/2016/12/08/000000)とか。  
  
### 符号付き乗算器
![符号付き乗算器](./img/multi.png)  
  
## 除算  
### 回復法  

## （ALUを拡張）

## 参考
[シフト演算](http://kccn.konan-u.ac.jp/information/cs/cyber03/cy3_shc.htm)  
[booth 乗算器の話](https://tom01h.exblog.jp/28143770/)  
[**ディジタル回路設計とコンピュータアーキテクチャ**](https://www.shoeisha.co.jp/book/detail/9784798147529)  
[コンピュータシステムの理論と実装](https://www.oreilly.co.jp/books/9784873117126/)
